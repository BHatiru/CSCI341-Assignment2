{% extends 'base.html' %} {% block title %}User List{% endblock %} {% block
content %}

{% with messages = get_flashed_messages() %}
{% if messages %}
{% for message in messages %}
<div class="alert alert-success alert-dismissible fade show" role="alert">
  
  <button type="button" class="close" data-dismiss="alert" aria-label="Close">
    <span aria-hidden="true">Ã—</span>
  </button>
  {{ message }}
</div>
{% endfor %}
{% endif %}
{% endwith %}

<div class="h-200 p-4 text-white bg-primary border rounded-3">
  <h2>
    User List
    <button type="button" class="btn btn-success float-right" data-toggle="modal" data-target="#addUserModal">
      Add User
    </button>
  </h2>


</div>
<div class="table-responsive">
  <table class="table table-hover table-white">
    <thead>
      <tr class="text-center">
        <th scope="col">User ID</th>
        <th scope="col">Email</th>
        <th scope="col">Given Name</th>
        <th scope="col">Surname</th>
        <th scope="col">City</th>
        <th scope="col">Phone Number</th>
        <th scope="col">Profile Description</th>
        <th scope="col">password</th>
        <th scope="col">Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for user in users %}
      <tr>
        <td>{{ user.user_id }}</td>
        <td>{{ user.email }}</td>
        <td>{{ user.given_name }}</td>
        <td>{{ user.surname }}</td>
        <td>{{ user.city }}</td>
        <td>{{ user.phone_number }}</td>
        <td>{{ user.profile_description }}</td>
        <td>{{ user.password }}</td>
        <td>
          <div class="d-flex justify-content-between">
            <a href="{{ url_for('edit_user', user_id=user.user_id) }}" class="btn btn-sm btn-info mr-2"
              data-toggle="modal" data-target="#editUserModal">Edit</a>
            <a href="{{ url_for('delete_user', user_id=user.user_id) }}" class="btn btn-sm btn-danger"
              onclick="return confirm('Are you sure?')">Delete</a>
          </div>
        </td>
      </tr>
      {% endfor %}
      <!-- Edit User Modal -->
      <div class="modal fade" id="editUserModal" aria-hidden="true" tabindex="-1" role="dialog">
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">Edit User</h5>
            </div>
            <div class="modal-body">{% include 'edit_user.html' %}</div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">
                Close
              </button>
            </div>
          </div>
        </div>
      </div>

    </tbody>
  </table>
</div>


<!-- Add User Modal -->
<div class="modal fade" id="addUserModal" aria-hidden="true" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Add User</h5>
      </div>
      <div class="modal-body">
        {% include 'add_user.html' %}
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">
          Close
        </button>
      </div>
    </div>
  </div>
</div>

{% endblock %}